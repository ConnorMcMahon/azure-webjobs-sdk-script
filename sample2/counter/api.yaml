---
tableStorage:
    table: apicountertablelocal
    partitionKey: counter
    connection: AzureWebJobsStorage

language: CSharp

apiName: "counter"

state: |
    public static int i = 1;
    public static int j = 1;

commonCode: |
        #r "Microsoft.WindowsAzure.Storage"
        using System.Net;
        using Microsoft.WindowsAzure.Storage.Table;
        using System.Net.Http;
        using Microsoft.WindowsAzure.Storage;
    
functions:
    - name: changeValues
      trigger: "GET@samplestate"
      code: |
        public static async Task<HttpResponseMessage> Run(HttpRequestMessage req, TraceWriter log)
        {
            i *= 2;
            j += 3;
            HttpResponseMessage res = new HttpResponseMessage(HttpStatusCode.OK)
            {
                Content = new StringContent("i = " + i + "; j = " + j)
            };
            return res;
        } 

